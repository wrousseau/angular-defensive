function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.angularDefensive=t()}(this,function(){"use strict";var e=new WeakMap,t=new WeakMap,n=new WeakMap,i=function(){function i(a,r,o){_classCallCheck(this,i),e.set(this,a),t.set(this,r),n.set(this,o),this.configurations={}}return _createClass(i,[{key:"registerConfiguration",value:function(e){var t=new this.Configuration;return this.configurations[e]=t,t}},{key:"getTemplate",value:function(t){var i=this;return new Promise(function(a){t.hasOwnProperty("template")?a(t.template):t.hasOwnProperty("templateUrl")&&e.get(i).get(t.templateUrl,{cache:n.get(i),headers:{Accept:"text/html"}}).then(function(e){a(e.data)})})}},{key:"promiseWrap",value:function(e){var n=t.get(this).defer();return t.get(this).when(e()).then(function(e){e===!1?n.reject():n.resolve()})["catch"](function(){n.reject()}),n.promise}},{key:"getDefensiveCase",value:function(e){var t=this;return new Promise(function(n,i){if(!t.configurations.hasOwnProperty(e))return i("Configuration "+e+" does not exist");for(var a=t.configurations[e].cases.slice(),r=function(){var e=a.shift();t.promiseWrap(e.check).then(function(){return t.getTemplate(e)}).then(function(t){return e.template=t,n(e)})};a.length;)r()})}},{key:"Configuration",get:function(){return i.Configuration}}],[{key:"Configuration",get:function(){return function(){function e(){_classCallCheck(this,e),this.cases=[]}return _createClass(e,[{key:"addCase",value:function(e){return this.cases.push(e),this}}]),e}()}}]),i}();i.$inject=["$http","$q","$templateCache"];var a=new WeakMap,r=new WeakMap,o=function(){function e(t,n){_classCallCheck(this,e),a.set(this,t),r.set(this,n)}return _createClass(e,[{key:"noNetwork",value:function(){return!r.get(this).isOnline()}},{key:"geolocationNotSupported",value:function(){return!navigator.geolocation}},{key:"geolocationNotAvailable",value:function(){var e=a.get(this).defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){e.reject()},function(){e.resolve()}):e.resolve(),e.promise}}]),e}();o.$inject=["$q","connectionStatus"];var s="ngDefensive.services";angular.module(s,["offline"]).service("CheckPreset",o).service("DefensiveConfiguration",i);var c=new WeakMap,u=new WeakMap,f=function(){function e(t,n){_classCallCheck(this,e),this.restrict="A",c.set(this,t),u.set(this,n)}return _createClass(e,[{key:"link",value:function(t,n,i){var a=null,r=u.get(e.instance);r.getDefensiveCase(i.ngDefensive).then(function(i){var r=c.get(e.instance);n.replaceWith(r(i.template)(t)),a=i}),t.action=function(){t.$eval(i.ngDefensiveCallbacks)[a.caseName]()}}}],[{key:"factory",value:function(t,n){return e.instance=new e(t,n),e.instance}}]),e}();f.factory.$inject=["$compile","DefensiveConfiguration"];var l="ngDefensive.directives";angular.module(l,[]).directive("ngDefensive",f.factory);var h="ngDefensive";angular.module(h,[l,s]);return h});
//# sourceMappingURL=angular-defensive.min.js.map
