function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.angularDefensive=n()}(this,function(){"use strict";var e=new WeakMap,n=new WeakMap,t=function(){function t(i,r){_classCallCheck(this,t),e.set(this,i),n.set(this,r),this.configurations={}}return _createClass(t,[{key:"registerConfiguration",value:function(e){var n=new this.Configuration;return this.configurations[e]=n,n}},{key:"getTemplate",value:function(t){var i=this;return new Promise(function(r){t.hasOwnProperty("template")?r(t.template):t.hasOwnProperty("templateUrl")&&e.get(i).get(t.templateUrl,{cache:n.get(i),headers:{Accept:"text/html"}}).then(function(e){r(e.data)})})}},{key:"getDefensiveCase",value:function(e){var n=this;return new Promise(function(t,i){if(!n.configurations.hasOwnProperty(e))return i("Configuration "+e+" does not exist");for(var r=n.configurations[e].cases.slice(),a=function(){var e=r.shift();return e.check()?{v:n.getTemplate(e).then(function(n){return e.template=n,t(e)})}:void 0};r.length;){var o=a();if("object"==typeof o)return o.v}})}},{key:"Configuration",get:function(){return t.Configuration}}],[{key:"factory",value:function(e,n){return new t(e,n)}},{key:"Configuration",get:function(){return function(){function e(){_classCallCheck(this,e),this.cases=[]}return _createClass(e,[{key:"addCase",value:function(e){return this.cases.push(e),this}}]),e}()}}]),t}(),i=function(){function e(n){_classCallCheck(this,e),this.connectionStatus=n}return _createClass(e,[{key:"noNetwork",value:function(){return!this.connectionStatus.isOnline()}}]),e}(),r="ngDefensive.services";angular.module(r,["offline"]).service("CheckPreset",i).factory("DefensiveConfiguration",t.factory);var a=function(){function e(n,t){_classCallCheck(this,e),this.restrict="A",this.link=function(e,i,r){var a=null;t.getDefensiveCase(r.ngDefensive).then(function(t){i.replaceWith(n(t.template)(e)),a=t}),e.action=function(){e.$eval(r.ngDefensiveCallbacks)[a.caseName]()}}}return _createClass(e,null,[{key:"factory",value:function(n,t){return new e(n,t)}}]),e}(),o="ngDefensive.directives";angular.module(o,[]).directive("ngDefensive",a.factory);var s="ngDefensive";angular.module(s,[o,r]);return s});
//# sourceMappingURL=angular-defensive.min.js.map
