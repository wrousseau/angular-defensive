function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.angularDefensive=n()}(this,function(){"use strict";var e=new WeakMap,n=new WeakMap,t=function(){function t(a,r){_classCallCheck(this,t),e.set(this,a),n.set(this,r),this.configurations={}}return _createClass(t,[{key:"registerConfiguration",value:function(e){var n=new this.Configuration;return this.configurations[e]=n,n}},{key:"getTemplate",value:function(t){var a=this;return new Promise(function(r){t.hasOwnProperty("template")?r(t.template):t.hasOwnProperty("templateUrl")&&e.get(a).get(t.templateUrl,{cache:n.get(a),headers:{Accept:"text/html"}}).then(function(e){r(e.data)})})}},{key:"getDefensiveCase",value:function(e){var n=this;return new Promise(function(t,a){if(!n.configurations.hasOwnProperty(e))return a("Configuration "+e+" does not exist");for(var r=n.configurations[e],i=function(){var e=r.cases.shift();return e.check()?{v:n.getTemplate(e).then(function(n){return e.template=n,t(e)})}:void 0};r.cases.length;){var o=i();if("object"==typeof o)return o.v}})}},{key:"Configuration",get:function(){return t.Configuration}}],[{key:"factory",value:function(e,n){return new t(e,n)}},{key:"Configuration",get:function(){return function(){function e(){_classCallCheck(this,e),this.cases=[]}return _createClass(e,[{key:"addCase",value:function(e){return this.cases.push(e),this}}]),e}()}}]),t}(),a="ngDefensive.services";angular.module(a,[]).factory("DefensiveConfiguration",t.factory);var r=function(){function e(n,t){_classCallCheck(this,e),this.restrict="A",this.scope={callbacks:"=ngDefensiveCallbacks"},this.link=function(e,a,r){var i=null;t.getDefensiveCase(r.ngDefensive).then(function(t){a.replaceWith(n(t.template)(e)),i=t}),e.action=function(){e.callbacks[i.caseName]()}}}return _createClass(e,null,[{key:"factory",value:function(n,t){return new e(n,t)}}]),e}(),i="ngDefensive.directives";angular.module(i,[]).directive("ngDefensive",r.factory);var o="ngDefensive";angular.module(o,[i,a]);return o});
//# sourceMappingURL=angular-defensive.min.js.map
