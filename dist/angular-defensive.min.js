function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.angularDefensive=n()}(this,function(){"use strict";var e=function(){function e(){_classCallCheck(this,e),this.configurations={}}return _createClass(e,[{key:"registerConfiguration",value:function(e){var n=new this.Configuration;return this.configurations[e]=n,n}},{key:"$get",value:function(e,n){var t=this.configurations;return{getTemplate:function(t){return new Promise(function(r){t.hasOwnProperty("template")?r(t.template):t.hasOwnProperty("templateUrl")&&e.get(t.templateUrl,{cache:n,headers:{Accept:"text/html"}}).then(function(e){r(e.data)})})},getDefensiveCase:function(e){var n=this;return new Promise(function(r,i){if(!t.hasOwnProperty(e))return i("Configuration "+e+" does not exist");for(var a=t[e],o=function(){var e=a.cases.shift();return e.check()?{v:n.getTemplate(e).then(function(n){return e.template=n,r(e)})}:void 0};a.cases.length;){var s=o();if("object"==typeof s)return s.v}})}}}},{key:"Configuration",get:function(){return e.Configuration}}],[{key:"factory",value:function(){return new e}},{key:"Configuration",get:function(){return function(){function e(){_classCallCheck(this,e),this.cases=[]}return _createClass(e,[{key:"addCase",value:function(e){return this.cases.push(e),this}}]),e}()}}]),e}(),n="ngDefensive.services";angular.module(n,[]).provider("DefensiveConfiguration",e.factory);var t=function(){function e(n,t){_classCallCheck(this,e),this.restrict="A",this.scope={callbacks:"=ngDefensiveCallbacks"},this.link=function(e,r,i){var a=null;t.getDefensiveCase(i.ngDefensive).then(function(t){r.replaceWith(n(t.template)(e)),a=t}),e.action=function(){e.callbacks[a.caseName]()}}}return _createClass(e,null,[{key:"factory",value:function(n,t){return new e(n,t)}}]),e}(),r="ngDefensive.directives";angular.module(r,[]).directive("ngDefensive",t.factory);var i="ngDefensive";angular.module(i,[r,n]);return i});
//# sourceMappingURL=angular-defensive.min.js.map
