function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.angularDefensive=n()}(this,function(){"use strict";var e=new WeakMap,n=new WeakMap,t=function(){function t(r,a){_classCallCheck(this,t),e.set(this,r),n.set(this,a),this.configurations={}}return _createClass(t,[{key:"registerConfiguration",value:function(e){var n=new this.Configuration;return this.configurations[e]=n,n}},{key:"getTemplate",value:function(t){var r=this;return new Promise(function(a){t.hasOwnProperty("template")?a(t.template):t.hasOwnProperty("templateUrl")&&e.get(r).get(t.templateUrl,{cache:n.get(r),headers:{Accept:"text/html"}}).then(function(e){a(e.data)})})}},{key:"getDefensiveCase",value:function(e){var n=this;return new Promise(function(t,r){if(!n.configurations.hasOwnProperty(e))return r("Configuration "+e+" does not exist");for(var a=n.configurations[e],i=function(){var e=a.cases.shift();return e.check()?{v:n.getTemplate(e).then(function(n){return e.template=n,t(e)})}:void 0};a.cases.length;){var o=i();if("object"==typeof o)return o.v}})}},{key:"Configuration",get:function(){return t.Configuration}}],[{key:"factory",value:function(e,n){return new t(e,n)}},{key:"Configuration",get:function(){return function(){function e(){_classCallCheck(this,e),this.cases=[]}return _createClass(e,[{key:"addCase",value:function(e){return this.cases.push(e),this}}]),e}()}}]),t}(),r="ngDefensive.services";angular.module(r,["offline"]).factory("DefensiveConfiguration",t.factory).factory("CheckPreset",CheckPreset.factory);var a=function(){function e(n,t){_classCallCheck(this,e),this.restrict="A",this.scope={callbacks:"=ngDefensiveCallbacks"},this.link=function(e,r,a){var i=null;t.getDefensiveCase(a.ngDefensive).then(function(t){r.replaceWith(n(t.template)(e)),i=t}),e.action=function(){e.callbacks[i.caseName]()}}}return _createClass(e,null,[{key:"factory",value:function(n,t){return new e(n,t)}}]),e}(),i="ngDefensive.directives";angular.module(i,[]).directive("ngDefensive",a.factory);var o="ngDefensive";angular.module(o,[i,r]);return o});
//# sourceMappingURL=angular-defensive.min.js.map
